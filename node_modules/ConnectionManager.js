var Utils = require("./Utils"),
    request = require("request");

class ConnectionManager {
    constructor(app) {
        this.app = app;
        this.utils = new Utils();
        app.get("/countries/", this.getCountryList.bind(this));
        app.get("/competitions/", this.getAllCompetitions.bind(this));
        app.get("/competition/:idcompetition/results", this.getCompetitionResults.bind(this));
        app.get("/competition/:idcompetition/rankings", this.getCompetitionRankings.bind(this));
        app.get("/teams/:teamid/roster", this.getTeamRoster.bind(this));
        app.get("/teams/:teamid", this.getTeamInfo.bind(this));
        app.get("/player/:playerid", this.getPlayerInfo.bind(this)); // Récupérer l'effectif puis prendre les infos de l'id du joueur
        
    }
    
    getCountryList(req, res) {
        
        let countries = this.utils.getCountryList();
        
        res.send(countries);
    }
    
    getAllCompetitions(req, res) {
        
        res.send();
        
    }
    getCompetitionResults(req, res) {
        let url = this.utils.generateRequest({request_type: "results", competition_id: req.params.idcompetition});
        
        /*
        let options = {
            host: "http://api.football-data.org",
            path: "/v1/competitions/445/fixtures",
            headers : {
                "X-Auth-Token": "0fbc25a8c9394f62934fd087ddb6b0c2"
            }
        }

        request.get({
            url: url,
            json:true,
            headers: {"X-Auth-Token": process.env.FOOTBALLAPIKEY}
        }, (err, res, data) => {
            console.log(data);    
        });
        */
        
        
    }
    
    getCompetitionRankings(req, res) {
        console.log("appel roster");
        res.end();
        
    }
    
    
    getTeamRoster(req, res) {
        console.log("appel classement");
        res.end();
        
    }
    
    getTeamInfo(req, res) {
        console.log("appel teaminfo");
        res.end();
        
    }
    
    getPlayerInfo(req, res) {
        console.log("appel playerinfo");
        res.end();
        
    }
}

module.exports = ConnectionManager;